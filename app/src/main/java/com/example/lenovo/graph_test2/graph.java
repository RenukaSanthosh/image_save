package com.example.lenovo.graph_test2;

import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Bitmap;
import android.graphics.drawable.BitmapDrawable;
import android.net.Uri;
import android.os.Bundle;
//import android.support.design.widget.FloatingActionButton;
//import android.support.design.widget.Snackbar;
import android.os.Environment;
import android.provider.MediaStore;
import android.support.v7.app.AppCompatActivity;
//import android.support.v7.widget.Toolbar;
//import android.view.View;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

import com.jjoe64.graphview.GraphView;
import com.jjoe64.graphview.Viewport;
import com.jjoe64.graphview.series.DataPoint;
import com.jjoe64.graphview.series.DataPointInterface;
import com.jjoe64.graphview.series.LineGraphSeries;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Random;
import java.util.Scanner;

public class graph extends AppCompatActivity {

    int i;
    private LineGraphSeries<DataPoint> series;
    private LineGraphSeries<DataPoint> series2;
    private double lastX = 0;
    Scanner scanner;
    double x=0.00;
    double y;
    double arr[]={15.90452,16.1407,16.54774,16.14573,16.22111,16.46734,16.78894,16.38693,16.38191,16.70352,16.86432,16.54271,16.62814,16.70352,16.94472,16.78392,16.22613,16.46231,16.38693,16.38693,16.22111,16.62312,16.78894,16.46231,16.0603,16.30653,16.70854,16.30653,16.0603,16.38191,16.62312,16.30151,15.90452,16.06533,16.70352,16.30653,16.22111,16.38191,16.86432,16.46231,16.06533,16.46231,16.86432,16.38693,16.30653,16.54271,16.78894,16.46734,16.30151,16.70352,16.94975,16.70352,15.98492,16.78392,17.03015,16.86935,16.62312,16.70854,17.10553,16.78894,16.06533,16.70854,17.02513,16.70352,16.22613,16.38191,16.46734,16.38191,16.1407,16.38191,16.78392,16.46231,16.14573,16.54271,16.86432,16.54271,16.70352,16.30653,17.02513,16.86432,17.58794,19.43719,21.20101,22.16583,22.40704,21.36181,19.1206,15.8995,15.1005,15.26131,15.17588,15.50251,15.66332,16.62312,16.78894,16.62814,16.46734,16.86432,17.18593,16.86432,16.78894,17.02513,17.35176,17.03015,16.86432,17.11055,17.50754,17.18593,17.02513,17.34673,17.74874,18.39196,17.27136,18.07035,18.07538,18.47236,17.59296,18.07035,18.39698,18.07538,18.31156,18.95477,19.19598,18.9598,18.71859,19.20101,19.59799,19.20101,18.87437,19.0402,19.19598,18.71357,18.23116,18.15075,18.07035,18.71357,16.86935,16.70854,17.10553,16.62312,16.14573,16.54271,16.54271,15.9799,15.49749,15.65829,15.98492,15.66332,15.65829,15.90452,16.38191,15.9799,15.66332,16.22111,16.46734,15.34171,16.22613,16.54271,16.78894,16.70352,16.06533,16.30653,17.02513,16.30653,16.54774,16.78392,16.46734,16.70352,16.46231,16.62312,17.02513,16.38693,16.38191,16.54774,17.18593,16.46734,16.22111,16.46231,16.78392,16.22111,15.98492,16.30653,16.62814,16.38191,16.30151,16.38191,16.78392,16.30653,16.22111,16.54271,16.78392,16.38693,17.42714,16.38191,16.62312,16.62312,16.30151,16.54774,16.70352,16.22111,16.06533,16.54271,17.02513,16.54271,16.38693,16.70352,16.94472,16.54271,16.38693,16.54774,16.86432,16.86432,18.23116,17.02513,17.18593,16.86432,16.62814,17.02513,17.18593,16.70854,16.30653,16.46231,16.78894,16.46734,16.30151,16.54271,16.78392,16.30653,16.30151,16.62312,17.26633,16.46231,16.30151,16.54271,16.86935,16.78392,17.50754,19.8392,21.68342,22.73367,22.97487,21.60804,18.47739,15.73869,13.97487,15.26131,15.8995,16.22111,16.38693,16.38191,16.70352,16.70352,16.70352,16.86432,17.18593,16.86432,16.94472,16.86935,17.50754,17.18593,17.19095,16.54774,17.66834,17.26633,17.18593,17.50754,18.07035,17.58794,17.66834,17.51256,18.15578,17.83417,17.82915,18.31156,18.63317,18.31658,18.31658,18.71357,19.20101,19.0402,17.99497,19.35678,19.59799,19.19598,18.79899,19.0402,19.20101,18.63819,17.83417,18.31156,18.07538,17.51256,17.10553,17.11055,17.26633,16.54774,16.14573,16.30653,16.62312,15.9799,15.65829,15.90452,15.98492,15.8995,15.58291,15.9799,16.14573,15.82412,15.26131,16.1407,16.38693,16.0603,15.8995,16.30151,16.54774,16.46231,16.30653,16.54774,16.70352,16.30151,16.14573,16.46734,16.70854,16.38191,16.1407,16.38191,16.70854,16.30151,16.0603,16.22613,16.78392,16.22613,15.74372,16.62312,16.78392,16.22613,16.22613,16.06533,16.86432,16.38191,16.1407,16.46231,16.70352,16.30151,16.1407,16.62312,17.42714,16.38191,16.22111,16.46231,17.02513,16.30151,16.22111,16.14573,16.78894,16.54774,16.38191,16.46231,16.86432,17.02513,16.22613,16.46231,16.70854,16.78894,16.70352,17.02513,17.19095,16.94975,16.86432,17.11055,16.94472,16.62814,16.22613,16.54774,16.86432,16.62312,16.30151,16.70352,16.94472,16.38191,16.38191,16.46231,16.86432,16.46734,16.30151,16.70854,16.86935,16.78392,17.90955,20,21.52764,22.89447,23.21608,21.52261,18.39698,15.49749,15.41709,15.49749,15.49749,16.06533,15.73869,16.06533,16.54271,16.70352,16.70352,17.26633,17.18593,16.94472,16.70854,18.47236,17.34673,17.10553,17.10553,16.86935,17.42714,17.26633,17.11055,17.58794,17.67337,17.43216,17.42714,17.82915,18.15578,17.90955,16.86935,18.23618,18.71357,18.55779,18.55779,19.03518,19.28141,18.9598,19.03518,19.35678,19.60302,19.36181,19.03518,19.19598,19.27638,18.63819,18.23618,17.51256,18.23618,17.82915,17.03015,17.03015,17.18593,16.94472,16.46231,16.22613,16.22613,15.98492,15.9799,15.90452,15.98492,15.66332,15.8191,15.9799,16.46231,16.06533,15.9799,16.1407,17.74874,16.06533,16.14573,16.22613,16.54774,16.54271,16.38191,16.46231,17.02513,16.38693,16.0603,16.38191,16.86432,16.14573,16.38191,16.62312,16.46734,16.30151,16.1407,16.46231,16.46734,16.46231,15.90452,16.38693,16.70352,16.30151,16.14573,16.30653,16.70352,16.30151,15.98492,16.22613,16.62814,16.38191,16.0603,16.30653,16.86432,16.46231,16.22111,16.22613,16.70352,16.30151,16.30151,16.54271,16.62814,16.30653,16.22111,16.46734,17.02513,16.70352,16.22613,16.70854,17.18593,16.86432,16.94472,16.62312,16.62814,16.22613,16.0603,16.38191,16.70854,16.38693,16.22111,16.54271,16.54271,16.30151,16.22111,16.46231,16.86432,16.38693,16.06533,16.62312,16.22613,18.55276,20.1608,21.92462,23.21608,22.49246,20.72362,17.51256,16.62312,15.49749,15.0201,15.33668,15.98492,16.38693,16.30151,16.62814,17.10553,16.78392,16.86432,17.02513,17.42714,16.78894,16.86432,17.11055,17.27136,17.10553,17.11055,17.35176,17.74874,17.50754,16.86432,17.26633,17.58794,17.51256,16.62814,17.98995,17.83417,17.99497,17.98995,18.39196,18.8794,18.71357,18.71859,19.43719,18.15578,19.11558,18.95477,19.27638,19.28141,18.8794,18.31658,18.55276,17.51256,18.07538,18.15075,17.90955,18.15075,17.26633,16.86935,16.86935,16.86935,16.22613,16.14573,16.22613,16.86432,15.8995,15.8191,15.9799,16.22111,15.74372,17.10553,15.90452,16.38191,15.98492,15.98492,16.46231,16.54271,17.02513,15.9799,16.14573,16.78392,16.38693,16.38191,16.46734,16.54774,16.54774,16.38693,16.62814,16.78392,16.38191,16.22613,16.46734,16.62814,16.46231,16.1407,16.30653,16.70352,16.38191,16.06533,16.38191,16.78392,16.38191,16.46231,16.46734,16.54271,16.38191,15.9799,16.22613,16.70854,16.30653,16.14573,16.46231,16.94472,16.46231,16.06533,16.70352,16.86935,16.54271,16.38191,16.54774,16.94975,16.86432,16.70352,16.62814,16.70352,16.1407,16.22111,16.22613,16.38693,15.98492,16.1407,16.30151,16.46734,16.30151,16.14573,16.38191,15.50251,16.06533,16.86432,16.38693,17.18593,18.15578,19.8392,21.04523,22.33166,22.32663,20.48241,17.51256,16.78392,15.1809,14.85427,14.93467,16.06533,16.46231,16.38191,16.46231,16.78392,16.70352,16.70352,17.03015,16.46734,16.78392,16.70854,16.86432,17.11055,16.94472,16.86935,17.18593,17.42714,17.18593,17.10553,17.50754,17.59296,17.50754,17.42714,17.58794,18.31156,17.98995,18.15075,18.47236,18.79397,18.55276,18.71357,19.03518,19.03518,19.03518,19.11558,19.51759,19.20101,18.87437,18.47739,18.87437,18.79397,17.90955,17.58794,17.66834,17.74874,17.18593,16.86432,16.70352,16.78894,16.30151,15.90452,16.14573,16.22111,16.1407,16.0603,15.74372,15.90452,15.8191,15.9799,16.0603,16.54271,16.22111,16.1407,16.30151,16.46734,16.22111,16.1407,16.46231,16.62312,16.46231,16.38191,16.46231,16.70854,16.46231,16.38191,16.54271,16.86432,16.22613,16.22613,16.46231,16.46734,16.38191,16.22613,16.38191,16.62312,16.38191,16.14573,16.62814,16.62312,16.38191,16.38191,16.38191,15.66332,16.38693,16.46231,16.62312,16.62312,17.26633,16.46734,16.94472,16.94975,16.78392,16.86432,16.94472,17.18593,16.78392,16.62312,16.46231,16.38693,16.06533,16.30653,16.54271,16.86432,16.30653,16.30151,16.38191,16.62312,16.30653,16.22613,16.38191,16.78392,16.38693,16.14573,16.94472,18.55276,19.9196,21.28643,22.80905,22.80905,20.63819,16.86935,15.09548,15.1809,15.01508,16.46231,16.46231,17.66834,16.22613,16.22613,17.26633,17.90955,16.86432,16.70352,17.10553,17.18593,16.86432,16.86432,17.18593,17.58794,17.11055,16.94975,17.26633,17.58794,16.38693,17.19095,17.82915,17.67337,17.43216,17.74874,17.99497,18.23618,18.15075,18.23116,18.79397,20.23618,18.95477,18.79899,19.20101,19.44221,19.11558,19.1206,19.27638,19.19598,18.71357,18.71357,18.55779,18.39196,17.75377,17.58794,17.58794,17.35176,16.86432,16.30653,16.30653,16.38693,16.06533,15.8995,16.46231,16.22111,15.90452,15.66332,15.8995,15.1005,15.8191,15.1809,16.0603,16.38191,15.26131,15.9799,16.22613,16.54774,16.54774,16.54271,16.46734,16.14573,16.46231,16.54271,16.94472,16.22613,16.54271,16.30151,16.86432,16.78392,16.54271,15.90452,16.38191,16.54271,16.30151,16.30151,16.54271,16.46734,16.06533,16.1407,16.30653,16.38693,16.22111,16.22111,16.38693,16.70352,16.46734,16.22613,16.46231,16.62312,16.78392,16.46734,16.78894,16.94472,16.78392,16.94472,17.34673,17.18593,16.54774,15.74372,16.54271,16.38693,16.38191,16.22613,16.22111,16.46231,16.22111,15.74372,16.46734,16.78392,16.38191,16.30151,16.46734,15.82412,16.22111,16.86432,19.11558,20.1608,22.09045,23.05528,22.65327,20.24121,16.06533,15.1005,15.33668,15.33668,15.57789,16.30151,16.22613,16.30653,16.30151,16.62312,16.86432,16.78894,16.30653,16.70352,17.02513,17.18593,17.02513,17.03015,17.26633,17.50754,16.94975,17.18593,17.43216,17.27136,17.34673,17.11055,16.62814,17.99497,17.82915,17.90955,18.23116,18.39698,18.39196,18.55276,20,19.0402,19.03518,18.8794,19.27638,19.51759,19.35678,19.43719,19.43719,19.59799,18.39698,18.47236,18.15578,18.63317,17.58794,17.11055,17.18593,16.94975,16.62312,16.22613,16.06533,16.22613,15.50251,15.73869,15.82412,16.14573,15.74372,15.9799,15.98492,16.06533,15.9799,15.8995,15.58291,16.38191,16.22613,15.82412,16.38693,16.78894,16.54271,16.46734,16.62312,16.38693,16.54271,16.30151,16.46231,16.62814,16.62312,16.06533,16.46734,16.86432,16.38693,15.90452,15.98492,16.54271,17.34673,16.0603,16.30151,16.46231,16.22613,16.22111,16.46734,16.54271,16.22613,16.30151,16.46231,16.46231,16.22111,16.30151,16.38693,16.46734,16.38191,16.30653,16.54271,16.70854,16.78392,16.62312,16.94975,17.18593,16.94472,16.86432,17.10553,16.62312,16.14573,16.1407,15.34171,14.9397,16.22111,16.1407,16.38191,16.38191,16.1407,16.30151,15.98492,16.62312,16.1407,16.22613,16.54271,16.70854,16.94975,18.71357,20.56281,22.24623,22.96985,22.25126,19.9196,16.06533,15.09548,14.93467,15.01508,15.73869,15.82412,16.1407,16.54271,16.62814,16.86432,16.86935,17.02513,16.46734,17.34673,17.02513,17.10553,17.18593,15.98492,16.46734,17.18593,17.03015,16.86935,17.10553,17.74874,17.43216,17.66834,17.74874,18.07035,17.91457,17.75377,17.82915,18.31156,18.31156,18.31658,18.23618,18.63819,19.1206,18.8794,19.03518,19.11558,19.0402,20,19.9196,18.71859,18.79397,18.47739,17.83417,17.66834,18.71357,17.34673,17.10553,17.02513,16.78392,16.30151,15.98492,15.0201,16.30151,15.8191,15.50251,15.66332,15.98492,15.82412,15.74372,15.34171,16.14573,16.0603,15.90452,16.22613,16.38693,17.02513,16.38191,16.54774,16.54774,16.70352,16.30151,16.46231,16.54774,16.54774,16.38693,16.70352,16.62814,16.38693,17.58794,16.54774,17.66834,16.14573,16.38693,16.54271,16.54271,16.38191,17.18593,16.30653,16.62312,16.06533,16.30653,16.46231,16.46734,16.22613,17.58794,16.46231,16.38191,16.22111,16.14573,16.46231,16.46231,16.30653,16.38191,16.62312,16.70352,16.38693,16.30653,16.70352,16.78894,16.62814,16.78392,15.50251,17.11055,16.86935,16.78392,16.78894,16.70352,16.54271,16.0603,16.30653,16.46734,16.30151,16.38191,16.46734,16.54271,16.30151,16.30151,16.38191,16.46231,16.22613,16.22111,16.22613,16.78894,17.18593,18.87437,20.32161,21.52764,22.25126,21.76884,19.75879,16.38191,15.25628,15.17588,14.93467,15.49749,16.1407,16.54271,17.90955,16.70352,16.62814,16.86432,17.90955,17.10553,16.78894,16.86432,17.26633,17.26633,17.10553,16.70854,16.94472,17.03015,16.78894,17.19095,17.42714,18.55276,17.43216,17.19095,17.51256,18.07035,17.98995,18.07538,18.39196,18.63317,18.39196,18.55276,19.59799,19.8392,19.11558,19.03518,19.27638,19.27638,19.03518,18.79899,18.87437,18.71357,18.31156,17.98995,17.59296,17.82915,17.26633,16.86432,17.02513,16.78894,16.38693,16.38191,16.0603,16.22111,15.90452,15.9799,15.98492,16.0603,15.66332,15.8191,16.1407,15.98492,15.98492,15.82412,16.30653,16.30653,16.30151,16.30151,16.30653,16.62312,16.46231,16.62312,16.78392,16.46734,16.46231,16.54271,16.54271,16.54271,16.22111,17.02513,16.46231,16.46231,16.30653,16.22613,16.46734,16.1407,16.38191,16.38191,16.46231,16.06533,16.06533,16.22111,16.22111,16.30151,15.98492,15.8191,16.78392,16.22111,16.1407,16.30151,16.70854,16.38693,16.14573,15.66332,16.54774,16.62814,16.62312,16.38693,16.78392,18.07035,16.70352,16.62814,16.62312,16.54271,16.30151,16.30151,16.38693,16.22613,15.50251,16.22111,17.82915,16.54271,16.78392,16.38693,16.38693,16.78392,16.94472,16.46231,16.62312,17.26633,18.39196,20,21.12563,21.84925,22.41206,20.79899,17.35176,15.34171,15.17588,14.77387,15.25628,16.22111,16.46231,16.30151,16.54271,16.94472,16.78392,16.86432,16.94472,17.10553,16.78392,16.78392,17.11055,17.19095,17.50754,16.30653,16.86935,16.38693,17.26633,17.34673,17.58794,17.74874,17.35176,17.58794,17.83417,17.99497,18.31156,18.07035,18.39196,18.63317,18.55276,18.71357,19.0402,18.31658,19.11558,19.51759,19.28141,19.28141,18.79899,18.79397,18.63819,18.15578,17.75377,17.75377,17.59296,17.42714,17.02513,16.70352,16.70352,16.54271,16.14573,15.58291,15.66332,15.98492,15.82412,15.73869,16.78392,15.82412,15.65829,15.8191,16.06533,15.90452,15.9799,15.9799,16.30151,16.46231,16.14573,16.22613,16.62312,16.46734,16.38693,15.90452,16.38693,16.54774,16.54271,15.82412,16.54271,16.70352,16.38191,16.22613,16.54271,16.46231,16.30653,16.22111,16.46734,16.30653,16.30151,15.98492,16.46231,16.22613,16.14573,16.38191,16.54271,16.46231,16.30151,16.14573,16.30653,16.30653,16.46231,16.30653,16.46734,15.34171,16.30151,16.38191,16.46231,16.22613,16.30151,16.46231,16.78392,16.78894,16.22613,16.30151,16.70352,16.70854,16.94472,16.70352,17.19095,17.19095,17.18593,17.02513,17.26633,16.94472,16.38191,16.06533,16.78392,16.62814,16.38191,16.30151,16.62814,16.78392,16.54271,16.1407,16.70352,16.78392,16.22613,16.46734,16.86432,17.02513,17.42714,19.35678,21.36683,23.21106,23.05528,21.60804,19.1206,16.06533,15.1809,15.26131,15.65829,16.86432,16.22613,16.46231,16.30653,17.02513,17.34673,16.78392,17.11055,17.26633,17.18593,16.78894,17.26633,17.27136,17.03015,16.86935,17.19095,17.34673,17.26633,17.26633,17.67337,17.98995,17.50754,17.51256,17.91457,18.23618,17.98995,18.07035,18.47739,18.71357,18.47739,18.31658,19.1206,19.51759,18.9598,19.19598,20.71859,19.43719,19.0402,18.79397,18.8794,18.8794,17.03015,17.90955,18.07538,17.98995,17.27136,16.86432,17.19095,17.03015,16.38693,16.22111,16.54271,16.54774,16.0603,15.66332,15.98492,16.22111,15.82412,15.9799,16.22111,16.46231,15.98492,15.42211,16.30151,16.62312,16.14573,16.22111,16.62312,16.70352,16.70352,16.30653,16.70854,16.94975,15.66332,16.38693,16.78392,16.78392,16.30653,16.46734,16.62814,16.70854,17.42714,16.14573,16.70352,16.86432,16.14573,16.38191,16.62312,16.54774,16.22613,16.06533,16.06533,16.62312,16.22111,16.22613,16.30653,16.46231,17.02513,16.22613,16.62312,16.46734,16.30151,16.22111,17.42714,16.78894,16.62312,16.30151,16.78392,16.54774,16.46734,16.38191,16.86432,16.94975,17.50754,16.70352,16.94975,16.78894,16.54774,16.94975,18.47236,17.66834,16.70352,16.38693,16.62312,16.70352,16.38191,16.38191,16.54271,16.70854,16.38693,16.38191,16.78392,16.78392,16.38191,16.22111,16.38191,16.78392,16.30151,16.94472,17.10553,18.07035,19.35678,20.9598,22.80905,23.13568,21.36683,18.39196,15.8191,15.65829,15.0201,14.8593,16.30151,16.62312,16.1407,16.30151,16.86432,17.42714,16.70352,16.62814,16.70854,17.03015,16.86432,16.70854,16.46734,17.35176,17.18593,17.18593,17.50754,17.59296,17.26633,17.11055,17.74874,17.83417,17.50754,16.78894,17.99497,17.75377,18.07538,18.39196,18.79397,18.95477,18.63317,18.9598,19.51759,19.75879,18.8794,19.11558,19.44221,19.28141,19.03518,18.47739,18.87437,18.47236,17.83417,17.59296,17.75377,16.86432,16.62312,16.78392,16.94472,16.70352,16.22111,16.0603,16.22111,16.0603,15.73869,15.34171,16.0603,16.06533,15.8191,15.66332,16.30151,16.30653,16.0603,15.9799,16.54774,16.46734,16.30653,16.38693,16.78894,16.62814,16.22111,16.30151,16.62312,16.86432,16.30653,16.0603,17.50754,16.78894,16.54271,16.54774,16.86935,16.70854,16.30653,16.22613,16.78894,16.70352,16.30151,16.70352,16.70854,16.70352,16.22111,16.38693,16.62814,16.54774,16.1407,16.30151,16.62312,16.62312,16.22111,16.30151,16.62312,16.54271,16.30151,16.1407,16.38693,16.94472,16.38191,16.38191,16.78392,16.70352,16.22613,16.38191,17.10553,16.86935,16.94472,16.78392,17.18593,16.70854,16.46734,16.46734,17.18593,16.54774,15.42211,16.62312,16.78392,16.62814,16.54271,16.38191,16.94472,16.70352,16.30151,16.30653,16.78392,17.74874,16.46734,16.78392,17.50754,18.63317,19.75879,21.28141,22.56784,22.49246,20.71859,17.27136,15.8995,15.8191,14.85427,14.85427,16.14573,16.70854,16.1407,16.54271,17.03015,17.66834,16.78392,16.78894,17.11055,17.10553,16.78392,16.70854,16.70854,17.26633,16.78392,15.98492,17.42714,17.11055,17.26633,17.18593,17.82915,17.67337,17.27136,17.59296,18.07538,17.99497,17.90955,18.07035,18.63317,18.55276,17.91457,18.8794,19.28141,19.36181,19.27638,19.11558,19.51759,19.0402,18.63819,18.71357,19.11558,19.03518,17.75377,17.50754,16.70854,17.35176,16.86935,16.70854,16.78894,16.70352,16.22111,16.54271,16.30151,16.22613,15.9799,16.30151,16.30151,16.22111,15.82412,15.98492,16.46231,16.62312,16.14573,16.14573,16.78392,16.70352,16.30653,15.50251,17.10553,16.78392,16.46734,15.90452,16.86432,16.94472,16.30151,16.46734,16.86432,16.62312,15.26131,16.06533,16.78392,16.70352,16.54271,16.46734,17.66834,16.54774,15.9799,16.22111,16.62312,16.54774,16.14573,16.0603,16.54774,16.46231,16.54271,16.22111,16.70352,16.46734,17.34673,16.54271,16.86432,16.54271,16.14573,16.46231,17.03015,16.86935,16.54271,16.70854,17.58794,17.10553,16.62814,16.70352,17.02513,16.70352,16.22613,16.30151,16.86432,16.38693,16.1407,16.30151,15.82412,16.54774,16.54271,16.30151,16.78392,16.70352,16.22613,16.62312,15.82412,17.51256,19.8392,21.52261,22.64824,22.49246,21.36181,18.47236,15.8191,15.41709,15.01508,15.0201,16.38693,16.38693,16.30151,16.46231,16.86935,17.03015,16.70854,16.86432,17.26633,17.02513,16.94472,17.34673,17.42714,17.27136,17.02513,17.26633,17.67337,17.58794,17.35176,17.50754,16.62814,17.98995,17.59296,17.90955,17.99497,18.39196,18.31156,18.63317,19.03518,18.9598,18.79397,19.03518,19.60302,19.59799,19.20101};

    double op[]=new double[2000];
    double s_op[]=new double[2000];
    double a1[] = {1, -0.9428, 0.3333};
    double b1[] = {0.0976, 0.1953, 0.0976};
    GraphView graph;
    GraphView graph2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // we get graph view instance
        filter2 b = new filter2();

        b.fil(a1, b1, arr, op);

        Smooth s = new Smooth();

        s.smooth(arr, s_op);
        graph = (GraphView) findViewById(R.id.graph);
        // data
        series = new LineGraphSeries<>();
        graph.setTitle("ECG SIGNALS");
        graph.setTitleTextSize(50);
        graph.getGridLabelRenderer().setTextSize(0.0001f);
        graph.getGridLabelRenderer().setHorizontalAxisTitle("TIME");
        graph.getGridLabelRenderer().setVerticalAxisTitle("VOLTAGE");
        graph.getGridLabelRenderer().setNumHorizontalLabels(10);
        graph.getGridLabelRenderer().setNumVerticalLabels(30);
        graph.getGridLabelRenderer().setHorizontalAxisTitleTextSize(25);
        graph.getGridLabelRenderer().setVerticalAxisTitleTextSize(25);
        graph.getGridLabelRenderer().setVerticalLabelsVisible(false);
        graph.getGridLabelRenderer().setHorizontalLabelsVisible(false);
        graph.getGridLabelRenderer().setGridColor(5);
        graph.addSeries(series);
        // customize a little bit viewport
        Viewport viewport = graph.getViewport();
        viewport.setYAxisBoundsManual(true);
        viewport.setXAxisBoundsManual(true);
        viewport.setMaxX(2.5);
        viewport.setMinX(0.00);
        viewport.setMinY(0);
        viewport.setMaxY(30.00);
        viewport.setScrollable(true);
        viewport.setScalable(true);
        graphing();


    }

    public void OnClickBtn2(View v) {
        setContentView(R.layout.graph_full);
        graph2 = (GraphView) findViewById(R.id.graph2);
        graph_plot g = new graph_plot();
        g.Graph(graph2);
        series2 = new LineGraphSeries<>();
        for (int i = 0; i < 2000; i++) {
            x = x + 0.005;
            y = s_op[i];
            series2.appendData(new DataPoint(x, y), true, 2000);
            series2.setDataPointsRadius(1);
            series2.setThickness(2);


        }
        graph2.addSeries(series2);

    }


    protected void graphing() {

        new Thread(new Runnable() {

            @Override
            public void run() {

                for (i = 0; i < 2000; i++) {
                    runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                            addEntry();
                        }
                    });


                    try {
                        Thread.sleep(50);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }

            }
        }).start();
    }


    private void addEntry() {


        scanner = new Scanner(String.valueOf(s_op[i]));
        double a =scanner.nextDouble();
        series.appendData(new DataPoint(lastX, a), true, 500);
        series.setDataPointsRadius(2);
        series.setThickness(2);
        lastX=lastX+0.005;
        //Log.e(String.valueOf(a),"hello");


    }
    public void onClickButton(View v) {
        EditText e1 = (EditText) findViewById(R.id.editText);
        //int height = ( v.findViewById(R.id.graph2)).getHeight();
        String str = null;
        str = String.valueOf(e1.getText());
        graph2.setDrawingCacheEnabled(true);
        Bitmap imageToSave = Bitmap.createBitmap(graph2.getDrawingCache());
        File direct = new File(Environment.getExternalStorageDirectory().getPath() + "/ECG IMAGES");

        if (!direct.exists()) {
            File wallpaperDirectory = new File(Environment.getExternalStorageDirectory().getPath() + "/ECG IMAGES");
            wallpaperDirectory.mkdirs();
        }


        if (str.equals("")) {
            Toast.makeText(getApplicationContext(), "Please enter the name of file before you proceed", Toast.LENGTH_LONG).show();
        }
        else {
            try {
                File file = new File(new File(Environment.getExternalStorageDirectory().getPath()
                        + "/ECG IMAGES" ),str+".png");
                FileOutputStream out = new FileOutputStream(file);
                imageToSave.compress(Bitmap.CompressFormat.PNG, 100, out);
                Toast.makeText(getApplicationContext(),"Image Saved", Toast.LENGTH_LONG).show();
                e1.setText(null);

            } catch (FileNotFoundException e) {
                e.printStackTrace();
                Log.e("MY APP", "exception", e);
            }
        }
    }

    public void openFolder(View v)
    {
        //Intent shareIntent = new Intent(Intent.ACTION_VIEW);
        //shareIntent.setType("*/*");
        //shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(Environment.getExternalStorageDirectory()   .getPath() + "/ECG IMAGES")));
        //shareIntent.setPackage("my.package");
        //startActivity(shareIntent);

        Intent gallery = new Intent(Intent.ACTION_VIEW, MediaStore.Images.Media.INTERNAL_CONTENT_URI);
        gallery.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(Environment.getExternalStorageDirectory()   .getPath() + "/ECG IMAGES")));
        startActivity(gallery);
    }
}

